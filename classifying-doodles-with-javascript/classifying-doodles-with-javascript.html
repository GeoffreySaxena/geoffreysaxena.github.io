<!DOCTYPE html>
<html lang="en-US">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WYJN75BMB1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-WYJN75BMB1');
    </script>
    <!-- Mobile Specific Meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon-->
    <link rel="shortcut icon" href="../images/favicon.ico">
    <!-- Author Meta -->
    <meta name="author" content="Pratik Geoffrey Saxena">
    <!-- Meta Description -->
    <meta name="description" content="A personal website built and deployed by Pratik Geoffrey Saxena.">
    <!-- Meta Keyword -->
    <meta name="keywords" content="portfolio">
    <!-- meta character set -->
    <meta charset="UTF-8">
    <!-- Site Title -->
    <title>Classifying Doodles with JavaScript</title>

    <link rel="stylesheet" href="../css/wpmin.css" media="all" data-minify="1" />

    <link rel='stylesheet' href='../css/main.css' type='text/css' media='all' />

    <link rel='dns-prefetch' href='http://fonts.googleapis.com/' />

    <link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />

    <link rel='stylesheet' id='collecto-google-font-enqueue-css' href='https://fonts.googleapis.com/css?family=Hepta+Slab:200,400,700&amp;subset=latin%2Clatin-ext&amp;display=swap' type='text/css' media='all' />

    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    <script type='text/javascript' src='../js/jquery.js' id='jquery-core-js'></script>
</head>


<body class="post-template-default single single-post postid-117 single-format-standard tk-theme-frontend">

    <body class="home blog hfeed tk-theme-frontend">
        <div id="page" class="site">
            <a class="skip-link screen-reader-text" href="#content">Skip to content</a>

            <div class="primary-side theme-side">
                <div class="sidebar-button">
                    <button class="sidebar-toggle">
                        <span class="screen-reader-text">toggle open/close sidebar</span>
                        <i class="icon-sidebar"></i>
                        <i class="icon-close"></i>
                    </button>
                </div>
                <div class="sidebar-hide-scroll">

                    <aside id="secondary" class="widget-area" role="complementary">
                        <section id="text-2" class="widget widget_text">
                            <div class="textwidget">
                                <h3>Hi, I‚Äôm Geoffrey!</h3>
                                <p>Here, you can read about my adventures with Machine Learning, Deep Learning, Data Visualization &amp; JavaScript!</p>
                            </div>
                        </section>

                        <section id="nav_menu-2" class="widget widget_nav_menu">
                            <div class="menu-social-menu-container">
                                <ul id="menu-social-menu" class="menu">
                                    <li id="menu-item-70" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-70"><a href="https://www.linkedin.com/in/geoffreysaxena/" target="_blank">LinkedIn</a></li>
                                    <li id="menu-item-71" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-71"><a href="https://github.com/geoffreysaxena" target="_blank">GitHub</a></li>
                                    <li id="menu-item-72" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-72"><a href="https://public.tableau.com/profile/saxenageoffrey#!/" target="_blank">Tableau</a></li>
                                    <li id="menu-item-73" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-73"><a href="https://twitter.com/geoffrey_saxena" target="_blank">Twitter</a></li>
                                    <li id="menu-item-74" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-74"><a href="https://in.pinterest.com/Geffyy/" target="_blank">Pinterest</a></li>
                                </ul>
                            </div>
                        </section>

                        <section id="recent-posts-2" class="widget widget_recent_entries">
                            <h2 class="widget-title"><b>Recent Posts</b></h2>
                            <ul>
                                <li>
                                    <a href="../who-said-mathematics-isn't-beautiful/who-said-mathematics-isn't-beautiful.html">Who Said Mathematics Isn't Beautiful?</a>
                                </li>
                                <li>
                                    <a href="../classifying-doodles-with-javascript/classifying-doodles-with-javascript.html">Classifying Doodles with JavaScript</a>
                                </li>
                                <li>
                                    <a href="../dog-breed-classification-using-cnns/dog-breed-classification-using-cnns.html">Dog Breed Classification using CNN's</a>
                                </li>
                                <li>
                                    <a href="../compose-a-poem-using-nlp-and-bert/compose-a-poem-using-nlp-and-bert.html">Compose A Poem using NLP &amp; BERT</a>
                                </li>
                                <li>
                                    <a href="../the-one-where-i-visualize-the-friends-screen-time/the-one-where-i-visualize-the-friends-screen-time.html">The One Where I Visualize The FRIENDS Screen Time</a>
                                </li>
                            </ul>
                        </section>

                        <section id="categories-2" class="widget widget_categories">
                            <h2 class="widget-title"><b>Categories</b></h2>
                            <ul>
                                <li class="cat-item cat-item-8"><a href="../category/machine-learning/index.html">Machine Learning</a>
                                </li>
                                <li class="cat-item cat-item-7"><a href="../category/data-visualization/index.html">Data Visualization</a>
                                </li>
                                <li class="cat-item cat-item-4"><a href="../category/javascript/index.html">JavaScript</a>
                                </li>
                                <li class="cat-item cat-item-4"><a href="../category/makeovermonday/index.html">MakeoverMonday</a>
                                </li>
                                <li class="cat-item cat-item-4"><a href="../category/coding-challenges/index.html">Coding Challenges</a>
                                </li>
                            </ul>
                        </section>
                    </aside><!-- #secondary -->
                </div>

                <div class="main-navigation-center clear">
                    <nav id="site-navigation" class="main-navigation" role="navigation">
                        <button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">
                            <p class="open-menu">Menu</p>
                            <p class="close-menu"><i class="icon-close"></i>Close</p>
                        </button>

                        <div class="menu-menu-container">
                            <ul id="primary-menu" class="menu">
                                <li id="menu-item-14" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-14"><a href="../index.html">Home</a></li>
                                <li id="menu-item-22" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-22"><a href="../category/index.html">Categories</a>
                                    <ul class="sub-menu">
                                        <li id="menu-item-23" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-23"><a href="../category/machine-learning/index.html">Machine Learning</a></li>
                                        <li id="menu-item-24" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-24"><a href="../category/data-visualization/index.html">Data Visualization</a></li>
                                        <li id="menu-item-25" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-25"><a href="../category/javascript/index.html">JavaScript</a></li>
                                        <li id="menu-item-26" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-26"><a href="../category/makeovermonday/index.html">MakeoverMonday</a></li>
                                        <li id="menu-item-27" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-27"><a href="../category/coding-challenges/index.html">Coding Challenges</a></li>
                                    </ul>
                                </li>

                                <li id="menu-item-31" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-31"><a href="https://geoffreysaxena.github.io/portfolio" target="_blank">Portfolio</a></li>
                                <li id="menu-item-15" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15"><a href="../about/index.html" aria-current="page">About</a></li>
                                <li id="menu-item-16" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-16"><a href="../contact/index.html">Contact</a></li>
                            </ul>
                        </div>
                    </nav><!-- #site-navigation -->
                </div>
            </div>

            <div id="content" class="site-content">

                <div id="primary" class="content-area container container-wrapper">
                    <main id="main" class="site-main" role="main">


                        <article id="post-129" class="container container-medium post-129 post type-post status-publish format-standard has-post-thumbnail hentry category-dairy-free-recipes category-easy-dinner-ideas category-recipes">



                            <div class="featured-content featured-image">
                                <img width="800" height="1200" src="../images/doodle-classifier.png" class="attachment-collecto-single-post size-collecto-single-post wp-post-image" alt="" loading="lazy" />
                            </div>


                            <header class="entry-header">
                                <h1 class="entry-title">Classifying Doodles with JavaScript</h1>
                            </header><!-- .entry-header -->


                            <aside class="meta-author">
                                <div class="entry-meta">
                                    <div class="posted-on">
                                        <p class="entry-date">Posted on</p>
                                        <p><span class="entry-date"><a href="index.html" rel="bookmark"><time class="entry-date published" datetime="2021-02-16T10:35:36+00:00">February 16, 2021</time></a></span></p>
                                    </div>
                                </div>
                                <section class="author-box">
                                    <div class="author-avatar">
                                        <img alt='' src='../images/geffy.jpg' class='avatar avatar-150 photo' height='150' width='150' loading='lazy' />
                                    </div>
                                    <div class="author-info">
                                        <p>In here, you can read about my adventures with Machine, Deep Learning, Data Visualization &amp; JavaScript!</p>
                                    </div>
                                </section>
                            </aside>


                            <nav class="navigation posts-navigation" role="navigation" aria-label="Posts navigation">
                                <h2 class="screen-reader-text">Posts navigation</h2>
                                <div class="nav-links">
                                    <div class="nav-previous"><a href="../who-said-mathematics-isn't-beautiful/who-said-mathematics-isn't-beautiful.html"><span class="prev-trig"><i class="icon-left"></i>Previous</span>
                                            <div class="prev-title"><span style="font-size: 20px" class="post-title">Who Said Mathematics Isn't Beautiful?</span></div>
                                        </a></div>
                                    <div class="nav-next"><a href="../dog-breed-classification-using-cnns/dog-breed-classification-using-cnns.html"><span class="next-trig">Next<i class="icon-right"></i></span>
                                            <div class="next-title"><span style="font-size: 20px" class="post-title">Dog Breed Classification using CNN's</span></div>
                                        </a></div>
                                </div>
                            </nav>
                            <div class="entry-content container container-xs">

                                <p>
                                    So, this is my starter code, we have two files, namely index.html &amp; sketch.js.
                                </p>
                                <p>
                                    <b>index.html</b><br>
                                <figure class="highlight">
                                    <pre><span class="p">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js"&gt;&lt;/script&gt;
    &lt;script src="https://unpkg.com/ml5@latest/dist/ml5.min.js">&lt;/script&gt;
    &lt;link rel="stylesheet" type="text/css" href="style.css">
    &lt;meta charset="utf-8" />

&lt;/head&gt;

&lt;body&gt;
    &lt;script src="sketch.js"&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</span></pre>
                                </figure>

                                <b>sketch.js</b><br>
                                <figure class="highlight">
                                    <pre><span class="p">let clearButton;
let canvas;

function setup() {
  canvas = createCanvas(400, 400);
  clearButton = createButton('clear');
  clearButton.mousePressed(clearCanvas);
  background(255);
}

function clearCanvas() {
  background(255);
}

function draw() {
  if (mouseIsPressed) {
    strokeWeight(8);
    line(mouseX, mouseY, pmouseX, pmouseY);
  }
}</span></pre>
                                </figure>

                                </p>


                                <p>
                                    You might be wondering, what do these do? This is quite simple actually. The setup function in the sketch.js file has multiple functions within it.
                                </p>

                                <p>
                                    The create canvas function is just creating a canvas of 280 by 280 pixels.
                                    I also have a Clear button, that just clears the canvas once I‚Äôm done with it when the button is clicked.
                                </p>

                                <p>
                                    It just redraws the canvas erasing the drawing.
                                    The draw function just leaves a trail with the specified thickness from my previous mouse position to my current mouse position.
                                </p>

                                <p>
                                    Moving on to the HTML file:
                                    I have imported the ml5 library &amp; the p5 library, I‚Äôm running the latest version as of writing this blog (p5.js ‚Äì 1.2.0).
                                </p>

                                <p>
                                    So, let‚Äôs start with our code:
                                </p>


                                <p>
                                    We‚Äôll create a variable for our Doodle Classifier, we‚Äôll just name it doodleClassifier.
                                </p>
                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">let doodleClassifier;</span></pre>
                                </figure>
                                </p>


                                <p>

                                    We‚Äôll call in the image classifier from the setup function, and pass in the argument as ‚ÄòDoodleNet‚Äô to indicate that we want to call in the pretrained Doodle Net model that was trained on Google‚Äôs ‚ÄòQuickDraw!‚Äô Dataset.

                                </p>


                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">function setup() {
  canvas = createCanvas(400, 400);
  clearButton = createButton('clear');
  clearButton.mousePressed(clearCanvas);
  background(255);
  doodleClassifier = ml5.imageClassifier('DoodleNet', modelReady);

}
</span></pre>
                                </figure>
                                </p>


                                <p>

                                    We are going to create another function called modelReady, that logs the status into the console log.
                                    Once this has been done, we take the canvas itself and pass it to the model for a prediction. Once it's gotten that canvas and sent it through the pre-trained neural network, it will get the results back, namely a probability score, and a confidence score for every single one of those categories.


                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">function modelReady() {
  console.log('The model is loaded! üöÄ');
  doodleClassifier.classify(canvas, gotResults);
}</span></pre>
                                </figure>
                                </p>


                                <p>
                                    We can then retrieve that in a callback, which we‚Äôll name gotResults.
                                    So, we create a function, and pass it two arguments, first the error &amp; then the results as ml5 follows an error first callback mechanism.
                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">function gotResults(error, results) {
  if (error) {
    console.error(error);
    return;
  }
  console.log(results);
}</span></pre>
                                </figure>
                                </p>


                                <p>
                                    We just handle the error by logging in into the console &amp; move on.
                                    Then we create another variable titled resultsDiv. This will contain an HTML DOM element to display the results.
                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">let resultsDiv;</span></pre>
                                </figure>
                                </p>

                                <p>
                                    Now we‚Äôll just format our raw results using backticks to make it more readable.
                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">function gotResults(error, results) {
  if (error) {
    console.error(error);
    return;
  }
  // console.log(results);
  let content = `${results[0].label} 
                 ${nf(100 * results[0].confidence, 2, 1)}%<br/>
                 ${results[1].label} 
                 ${nf(100 * results[1].confidence, 2, 1)}%`;

  resultsDiv.html(content);
}</span></pre>
                                </figure>
                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">function setup() {
  canvas = createCanvas(400, 400);
  clearButton = createButton('clear');
  clearButton.mousePressed(clearCanvas);
  background(255);
  doodleClassifier = ml5.imageClassifier('DoodleNet', modelReady);
  resultsDiv = createDiv('The model is loading! ‚è≤');
}</span></pre>
                                </figure>
                                </p>


                                <p>
                                    After this, we just bring in our classify function here again, as this is an easy way to loop over and over our canvas, by doing this we are in a way predicting the doodle continuously.
                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">function gotResults(error, results) {
  if (error) {
    console.error(error);
    return;
  }
  // console.log(results);
  let content = `${results[0].label} 
                 ${nf(100 * results[0].confidence, 2, 1)}%<br/>
                 ${results[1].label} 
                 ${nf(100 * results[1].confidence, 2, 1)}%`;

  resultsDiv.html(content);
  doodleClassifier.classify(canvas, gotResults);
}</span></pre>
                                </figure>
                                </p>

                                <p>
                                    The essential thing to remember is that the model was trained on extremely consistent data, i.e., the line thickness or the stroke weight was 16 to be precise.
                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">function draw() {
  if (mouseIsPressed) {
    strokeWeight(16);
    line(mouseX, mouseY, pmouseX, pmouseY);
  }
}</span></pre>
                                </figure>
                                </p>


                                <p>
                                    Combine all the code snippets an your sketch.js file should look something like this:
                                </p>

                                <p>
                                <figure class="highlight">
                                    <pre><span class="p">let clearButton;
let canvas;

let doodleClassifier;
let resultsDiv;

function setup() {
  canvas = createCanvas(400, 400);
  clearButton = createButton('clear');
  clearButton.mousePressed(clearCanvas);
  background(255);
  doodleClassifier = ml5.imageClassifier('DoodleNet', modelReady);
  resultsDiv = createDiv('model loading');
}

function modelReady() {
  console.log('model loaded');
  doodleClassifier.classify(canvas, gotResults);
}

function gotResults(error, results) {
  if (error) {
    console.error(error);
    return;
  }
  
  let content = `${results[0].label} 
                 ${nf(100 * results[0].confidence, 2, 1)}%<br/>
                 ${results[1].label} 
                 ${nf(100 * results[1].confidence, 2, 1)}%`;

  resultsDiv.html(content);
  doodleClassifier.classify(canvas, gotResults);
}

function clearCanvas() {
  background(255);
}

function draw() {
  if (mouseIsPressed) {
    strokeWeight(16);
    line(mouseX, mouseY, pmouseX, pmouseY);
  }
}
</span></pre>
                                </figure>
                                </p>

                            </div><!-- .entry-content -->


                        </article><!-- #post-## -->

                    </main><!-- #main -->

                </div><!-- #primary -->


            </div><!-- #content -->

            <footer class="d-flex pb-5 pt-6 pt-md-4 border-top border-light bg-primary">
                <div class="container">
                    <div class="row text-center">
                        <div class="col-lg-12">
                            <div class="social m-0">
                                <li class="social__item">
                                    <a class="social__link" href="https://github.com/geoffreysaxena" target="_blank" rel="noopener" aria-label="social icon"><span class="iconify" data-icon="brandico:github" data-inline="false"></span>
                                    </a>
                                </li>

                                <li class="social__item">
                                    <a class="social__link" href="https://www.linkedin.com/in/geoffreysaxena/" target="_blank" rel="noopener" aria-label="social icon"><span class="iconify" data-icon="brandico:linkedin-rect" data-inline="false"></span>
                                    </a>
                                </li>



                                <li class="social__item">
                                    <a class="social__link" href="https://public.tableau.com/profile/saxenageoffrey#!/" target="_blank" rel="noopener"><span class="iconify" data-icon="cib:tableau" data-inline="false"></span>
                                    </a>
                                </li>

                                <li class="social__item">
                                    <a style="--ionicon-stroke-width: 64px" class="social__link" href="https://twitter.com/geoffrey_saxena" target="_blank" rel="noopener"><span class="iconify" data-icon="el:twitter" data-inline="false"></span>
                                    </a>
                                </li>
                                <li class="social__item">
                                    <a style="--ionicon-stroke-width: 128px" class="social__link" href="https://in.pinterest.com/Geffyy/" target="_blank" rel="noopener"><span class="iconify" data-icon="simple-icons:pinterest" data-inline="false"></span>
                                    </a>
                                </li>
                                <br><br>
                                <a>Hosted by Pratik Geoffrey Saxena</a>
                            </div>
                        </div>
                    </div>
                </div>
            </footer><!-- #colophon -->
        </div><!-- #page -->
        <span class="black-overlay"></span>
        <script src="../js/wpmin.js" data-minify="1" defer></script>
    </body>
</body>

</html>